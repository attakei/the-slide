===========================
Mastering Sphinx Extensions
===========================

.. revealjs-section::
   :data-background-image: _static/background/1.png

Enhancing the Document Builder to Create Presentations

Introduction
============

Attention
---------

* I am not good to use English.
* Please post questions as text if you can.

  * https://x.com/attakei
  * https://github.com/attakei/slides

Hello PyCon Philippines
-----------------------

* はじめまして
* Nice to meet you
* Ikinagagalak kitang makilala

Speaker introduction
--------------------

.. container:: flex

   .. container:: size-2

      * Kazuya Takei ( ``@attakei`` )
      * Software engineer in Japan
      * Sphinx extension Writer

   .. container:: size-1

      .. figure:: https://www.attakei.net/_static/images/icon-attakei.jpg
 
.. revealjs-fragments:: 

   **My birth is 2/27 (before yesterday!)**

Outline of this talk
--------------------

* About Sphinx with advanced topic than standard usage.
* Approach to build presentations by Sphinx using sphinx-revealjs.
* Show case for power of Sphinx and sphinx-revealjs.

Introdocution of Sphinx
=======================

Questionnaire to you
--------------------

Please raise a hand!

.. revealjs-fragments:: 

   * Do you know Sphinx?
   * Do you see document generated by Sphinx?
   * Do you write document by Sphinx?

What is Sphinx?
---------------

.. container:: flex
   
   .. container:: size-1

      .. figure:: _static/images/sphinx-logo.svg

   .. container:: size-2

      Sphinx is "documentation generator" written by Python.

      * Convert document sources into readable style output.
      * Provide powerful features using reStructuredText.

.. revealjs-break::

.. container:: flex
   
   .. container:: size-1

      .. figure:: _static/images/sphinx-logo.svg

   .. container:: size-2

      Sphinx supports multiple inputs and outputs.
      
      * Input: reStructuredText, Markdown, and more.
      * Output: HTML, PDF, EPUB, mandoc, and more.

.. revealjs-break::

Appendix: Related products

* Pelican (written by Python)
* MkDocs (written by Python)
* Pandoc
* Hugo
* Astro

Made in Sphinx
--------------

Python and third party projects:

.. container:: r-stack

   .. revealjs-fragments::

      .. figure:: _static/images/screenshot-python-doc.png
         :width: 80%
   
      .. figure:: _static/images/screenshot-django-doc.png
         :width: 80%

      .. figure:: _static/images/screenshot-numpy-doc.png
         :width: 80%

..
   * Python documentation
   * Django documentation
   * Documentations of PyData projects.

.. revealjs-break::

Not Python:

.. container:: r-stack

   .. revealjs-fragments::

      .. figure:: _static/images/screenshot-python-doc.png
         :width: 70%
   
      .. figure:: _static/images/screenshot-phpmyadmin-manual.png
         :width: 70%

      .. figure:: _static/images/screenshot-fortran-website.png
         :width: 60%

..
   * Linux Kernel
   * phpMyAdmin (Web application to manage MySQL by PHP)
   * Carlire (Desktop application to manage e-books)
   * Fortlan language.

.. revealjs-break::

* |:white_check_mark:| Do you know Sphinx?
* |:white_check_mark:| Do you see document generated by Sphinx?
* |:black_square_button:| Do you write document by Sphinx?

Inside of Sphinx
================

3-step to generate documents
----------------------------

* Read and parse *reStructuredText* and convert into "doctree" objects.
* Modify doctree objects by configured rules and functions.
* Create documents and write into files from doctree objects.

.. revealjs-break::

.. mermaid:: graph/sphinx-step-0.mmd

.. revealjs-break::

.. mermaid:: graph/sphinx-step-1.mmd

.. revealjs-break::

.. mermaid:: graph/sphinx-step-2.mmd

.. revealjs-break::

.. mermaid:: graph/sphinx-step-3.mmd

reStructuredText
----------------

.. |DESC_RST| replace:: reStructuredText is text format of lightweight markup to write sttrucuted document. This is like for Markdown.

|DESC_RST|

.. revealjs-break::

Standard specs includes:

* Directive is block synxtax. It can have some attributes and content that has nested direvctives.
* Role is inline directive. It can have some parameters.
* Comment :code:`..` only directive. Nested content is not used for output.

.. revealjs-break::

Example with Markdown

.. container:: flex

   .. container:: size-1

      reStructuredText

      .. code-block:: rst

         Title
         =====

         Hello world.

         * List item 1
         * List item 2

         .. code-block:: python

            print("hello world")

   .. container:: size-1

      Markdown

      .. code-block:: markdown

         # Title

         Hello world.

         * List item 1
         * List item 2

         ```python
         print("Hello world")
         ```

Parse to doctree
----------------

.. revealjs-break::

.. container:: flex

   .. container:: size-1

      reStructuredText

      .. code-block:: rst

         Title
         =====

         Hello world.

         Sub title
         ---------

         * List item 1
         * List item 2

         .. code-block:: python

            print("hello world")
   
   .. container:: size-1

      Doctree

      .. mermaid::

         graph TB
             D([Document]) --o S1([Section])
             S1 --o T1([Title])
             S1 --o P([Paragraph])
             S1 --o S2([Section])
             S2 --o T2([Title])
             S2 --o L([List])
             L --o I1([Item])
             L --o I2([Item])
             S2 --o C([CodeBlock])

